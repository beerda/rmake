<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expand template rules into a list of rules by replacing rmake variables with their values — expandTemplate • rmake</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expand template rules into a list of rules by replacing rmake variables with their values — expandTemplate"><meta name="description" content="The functionality of expandTemplate() differs according to the type of the first argument.
If the first argument is a template job (i.e., a list of template rules) or a template rule,
then a job is created from templates by replacing rmake variables in templates with the values
of these variables, as specified in the second argument.
An rmake variable is a part of a string in the format
$[VARIABLE_NAME]."><meta property="og:description" content="The functionality of expandTemplate() differs according to the type of the first argument.
If the first argument is a template job (i.e., a list of template rules) or a template rule,
then a job is created from templates by replacing rmake variables in templates with the values
of these variables, as specified in the second argument.
An rmake variable is a part of a string in the format
$[VARIABLE_NAME]."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rmake</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with rmake</a></li>
    <li><a class="dropdown-item" href="../articles/rmake-introduction.html">Introduction to rmake</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/beerda/rmake/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Expand template rules into a list of rules by replacing <code>rmake</code> variables with their values</h1>
      <small class="dont-index">Source: <a href="https://github.com/beerda/rmake/blob/master/R/expandTemplate.R" class="external-link"><code>R/expandTemplate.R</code></a></small>
      <div class="d-none name"><code>expandTemplate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The functionality of <code>expandTemplate()</code> differs according to the type of the first argument.
If the first argument is a template job (i.e., a list of template rules) or a template rule,
then a job is created from templates by replacing <code>rmake</code> variables in templates with the values
of these variables, as specified in the second argument.
An <code>rmake</code> variable is a part of a string in the format
<code>$[VARIABLE_NAME]</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expandTemplate</span><span class="op">(</span><span class="va">template</span>, <span class="va">vars</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-template">template<a class="anchor" aria-label="anchor" href="#arg-template"></a></dt>
<dd><p>An instance of the S3 <code>rmake.rule</code> class, or a list of such objects, or a character
vector.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>A named character vector, matrix, or data frame with variable definitions.
For character vector, names are variable names, values are variable values. For matrix or
data frame, colnames are variable names and column values are variable values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>template</code> is an instance of the S3 <code>rmake.rule</code> class, or a list of such objects,
a list of rules created from <code>template</code> by replacing <code>rmake</code> variables is returned.
If <code>template</code> is a character vector then a character vector with all variants of <code>rmake</code> values
is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>vars</code> is a character vector, then all variables in <code>vars</code> are replaced in <code>template</code> so that
the result will contain <code>length(template)</code> rules. If <code>vars</code> is a data frame or a character
matrix, then the replacement of variables is performed row-wise. That is, a new sequence of rules is
created from <code>template</code> for each row of variables in <code>vars</code>, so that the result will contain
<code>nrow(vars) * length(template)</code> rules.</p>
<p>If the first argument of <code>expandTemplate()</code> is a character vector, then the result is a character
vector created by row-wise replacements of <code>rmake</code> variables, similarly to the case of template jobs.
See examples.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="replaceVariables.html">replaceVariables()</a></code>, <code><a href="rule.html">rule()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michal Burda</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Examples with template jobs and rules:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tmpl</span> <span class="op">&lt;-</span> <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-$[VERSION].csv'</span>, <span class="st">'process-$[TYPE].R'</span>, <span class="st">'output-$[VERSION]-$[TYPE].csv'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">job</span> <span class="op">&lt;-</span> <span class="fu">expandTemplate</span><span class="op">(</span><span class="va">tmpl</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>VERSION<span class="op">=</span><span class="st">'small'</span>, TYPE<span class="op">=</span><span class="st">'a'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># is equivalent to</span></span></span>
<span class="r-in"><span><span class="va">job</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-small.csv'</span>, <span class="st">'process-a.R'</span>, <span class="st">'output-small-a.csv'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">job</span> <span class="op">&lt;-</span> <span class="fu">expandTemplate</span><span class="op">(</span><span class="va">tmpl</span>, <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>VERSION<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'small'</span>, <span class="st">'big'</span><span class="op">)</span>, TYPE<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># is equivalent to</span></span></span>
<span class="r-in"><span><span class="va">job</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-small.csv'</span>, <span class="st">'process-a.R'</span>, <span class="st">'output-small-a.csv'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-big.csv'</span>, <span class="st">'process-a.R'</span>, <span class="st">'output-big-a.csv'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-small.csv'</span>, <span class="st">'process-b.R'</span>, <span class="st">'output-small-b.csv'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-big.csv'</span>, <span class="st">'process-b.R'</span>, <span class="st">'output-big-b.csv'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-small.csv'</span>, <span class="st">'process-c.R'</span>, <span class="st">'output-small-c.csv'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="rRule.html">rRule</a></span><span class="op">(</span><span class="st">'data-big.csv'</span>, <span class="st">'process-c.R'</span>, <span class="st">'output-big-c.csv'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Examples with template character vectors:</span></span></span>
<span class="r-in"><span><span class="fu">expandTemplate</span><span class="op">(</span><span class="st">'data-$[MAJOR].$[MINOR].csv'</span>,</span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>MAJOR<span class="op">=</span><span class="fl">3</span>, MINOR<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "data-3.1.csv"</span>
<span class="r-in"><span><span class="co"># returns: c('data-3.1.csv')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">expandTemplate</span><span class="op">(</span><span class="st">'data-$[MAJOR].$[MINOR].csv'</span>,</span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>MAJOR<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, MINOR<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Converting all values in `vars` to character vectors.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "data-3.0.csv" "data-4.0.csv" "data-3.1.csv" "data-4.1.csv" "data-3.2.csv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "data-4.2.csv"</span>
<span class="r-in"><span><span class="co"># returns: c('data-3.0.csv', 'data-4.0.csv',</span></span></span>
<span class="r-in"><span><span class="co">#            'data-3.1.csv', 'data-4.1.csv',</span></span></span>
<span class="r-in"><span><span class="co">#            'data-3.2.csv', 'data-4.2.csv')</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michal Burda.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

