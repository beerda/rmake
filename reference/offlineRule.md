# Rule for requesting manual user action

Instead of building the target, this rule simply issues the given error
message. This rule is useful for cases where the target `target` depends
on `depends` but must be updated by some manual process. So if `target`
is older than any of its dependencies, `make` will throw an error until
the user manually updates the target.

## Usage

``` r
offlineRule(target, message, depends = NULL, task = "all")
```

## Arguments

- target:

  A character vector of target file names of the manual (offline) build
  command

- message:

  An error message to be issued if targets are older than dependencies
  in `depends`

- depends:

  A character vector of file names the targets depend on

- task:

  A character vector of parent task names. The mechanism of tasks allows
  grouping rules. Anything different from `'all'` will cause the
  creation of a new task depending on the given rule. Executing
  `make taskname` will then force building this rule.

## Value

Instance of S3 class `rmake.rule`

## See also

[`rule()`](https://beerda.github.io/rmake/reference/rule.md),
[`makefile()`](https://beerda.github.io/rmake/reference/makefile.md)

## Author

Michal Burda

## Examples

``` r
r <- offlineRule(target='offlinedata.csv',
                 message='Please re-generate manually offlinedata.csv',
                 depends=c('source1.csv', 'source2.csv'))

# generate the content of a makefile (as character vector)
makefile(list(r))
#>  [1] "# Generated by rmake: do not edit by hand"                                                               
#>  [2] "SHELL=/bin/sh"                                                                                           
#>  [3] "R=\"$(R_HOME)/bin$(R_ARCH)/Rscript\""                                                                    
#>  [4] "RM=rm"                                                                                                   
#>  [5] "CP=cp"                                                                                                   
#>  [6] ".ONESHELL:"                                                                                              
#>  [7] ""                                                                                                        
#>  [8] ".PHONY: all"                                                                                             
#>  [9] "all: Makefile offlinedata.csv"                                                                           
#> [10] "\t"                                                                                                      
#> [11] "offlinedata.csv: source1.csv source2.csv"                                                                
#> [12] "\t$(R) - <<'EOFrmake'"                                                                                   
#> [13] "\t{"                                                                                                     
#> [14] "\t    stop(\"Please re-generate manually offlinedata.csv\")"                                             
#> [15] "\t}"                                                                                                     
#> [16] "\tEOFrmake"                                                                                              
#> [17] ".PHONY: clean"                                                                                           
#> [18] "clean: "                                                                                                 
#> [19] "\t$(RM) offlinedata.csv"                                                                                 
#> [20] "Makefile: Makefile.R"                                                                                    
#> [21] "\t$(R) - <<'EOFrmake'"                                                                                   
#> [22] "\t{"                                                                                                     
#> [23] "\t    params <- list(.target = \"Makefile\", .script = \"Makefile.R\", .depends = NULL, .task = \"all\")"
#> [24] "\t    source(\"Makefile.R\")"                                                                            
#> [25] "\t}"                                                                                                     
#> [26] "\tEOFrmake"                                                                                              

# generate to file
tmp <- tempdir()
makefile(list(r), file.path(tmp, "Makefile"))
```
